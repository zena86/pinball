let lastCardId = 0;

let dataOrderList = [];
dataOrderList[0] = {
    id: 0,
    picture: "images/picSmall.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 55,
    socials: "http://facebook.com"
    };

dataOrderList[1] = {
    id: 1,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 25,
    socials: "http://facebook.com"
    };

dataOrderList[2] = {
    id: 2,
    picture: "images/picMedium.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 15,
    socials: "http://facebook.com"
    };
dataOrderList[3] = {
    id: 3,
    picture: "images/picSmall.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 45,
    socials: "http://facebook.com"
    };

dataOrderList[4] = {
    id: 4,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 35,
    socials: "http://facebook.com"
    };

dataOrderList[5] = {
    id: 5,
    picture: "images/picMedium.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 15,
    socials: "http://facebook.com"
    };
dataOrderList[6] = {
    id: 6,
    picture: "images/picSmall.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 55,
    socials: "http://facebook.com"
    };

dataOrderList[7] = {
    id: 7,
    picture: "images/picBig.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 95,
    socials: "http://facebook.com"
    };

dataOrderList[8] = {
    id: 8,
    picture: "images/picMedium.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 85,
    socials: "http://facebook.com"
    };
dataOrderList[9] = {
    id: 9,
    picture: "images/picSmall.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 75,
    socials: "http://facebook.com"
    };

dataOrderList[10] = {
    id: 10,
    picture: "images/picBig.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 55,
    socials: "http://facebook.com"
    };

dataOrderList[11] = {
    id: 11,
    picture: "images/picMedium.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 19,
    socials: "http://facebook.com"
    };
dataOrderList[12] = {
    id: 12,
    picture: "images/picSmall.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 15,
    socials: "http://facebook.com"
    };

dataOrderList[13] = {
    id: 13,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 45,
    socials: "http://facebook.com"
    };

dataOrderList[14] = {
    id: 14,
    picture: "images/picMedium.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 75,
    socials: "http://facebook.com"
    };
dataOrderList[15] = {
    id: 15,
    picture: "images/picSmall.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 85,
    socials: "http://facebook.com"
    };

dataOrderList[16] = {
    id: 16,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 35,
    socials: "http://facebook.com"
    };

dataOrderList[17] = {
    id: 17,
    picture: "images/picMedium.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 33,
    socials: "http://facebook.com"
    };

dataOrderList[18] = {
    id: 18,
    picture: "images/picSmall.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 85,
    socials: "http://facebook.com"
    };

dataOrderList[19] = {
    id: 19,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 98,
    socials: "http://facebook.com"
    };

dataOrderList[20] = {
    id: 20,
    picture: "images/picMedium.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 0,
    socials: "http://facebook.com"
    };
dataOrderList[21] = {
    id: 21,
    picture: "images/picSmall.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 11,
    socials: "http://facebook.com"
    };

dataOrderList[22] = {
    id: 22,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 63,
    socials: "http://facebook.com"
    };

dataOrderList[23] = {
    id: 23,
    picture: "images/picMedium.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 5,
    socials: "http://facebook.com"
    };

dataOrderList[24] = {
    id: 24,
    picture: "images/picSmall.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 10,
    socials: "http://facebook.com"
    };

dataOrderList[25] = {
    id: 25,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 40,
    socials: "http://facebook.com"
    };

dataOrderList[26] = {
    id: 26,
    picture: "images/picMedium.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 15,
    socials: "http://facebook.com"
    };
dataOrderList[27] = {
    id: 27,
    picture: "images/picSmall.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 55,
    socials: "http://facebook.com"
    };

dataOrderList[28] = {
    id: 28,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 35,
    socials: "http://facebook.com"
    };

dataOrderList[29] = {
    id: 29,
    picture: "images/picMedium.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 20,
    socials: "http://facebook.com"
    };

dataOrderList[30] = {
    id: 30,
    picture: "images/picSmall.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 90,
    socials: "http://facebook.com"
    };

dataOrderList[31] = {
    id: 31,
    picture: "images/picBig.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 18,
    socials: "http://facebook.com"
    };

dataOrderList[32] = {
    id: 32,
    picture: "images/picMedium.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 60,
    socials: "http://facebook.com"
    };
dataOrderList[33] = {
    id: 33,
    picture: "images/picSmall.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 30,
    socials: "http://facebook.com"
    };

dataOrderList[34] = {
    id: 34,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 20,
    socials: "http://facebook.com"
    };

dataOrderList[35] = {
    id: 35,
    picture: "images/picMedium.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 80,
    socials: "http://facebook.com"
    };
dataOrderList[36] = {
    id: 36,
    picture: "images/picSmall.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 57,
    socials: "http://facebook.com"
    };

dataOrderList[37] = {
    id: 37,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 33,
    socials: "http://facebook.com"
    };

dataOrderList[38] = {
    id: 38,
    picture: "images/picMedium.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 65,
    socials: "http://facebook.com"
    };
dataOrderList[39] = {
    id: 39,
    picture: "images/picSmall.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 85,
    socials: "http://facebook.com"
    };

dataOrderList[40] = {
    id: 40,
    picture: "images/picBig.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 75,
    socials: "http://facebook.com"
    };

dataOrderList[41] = {
    id: 41,
    picture: "images/picMedium.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 45,
    socials: "http://facebook.com"
    };
dataOrderList[42] = {
    id: 42,
    picture: "images/picSmall.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 12,
    socials: "http://facebook.com"
    };

dataOrderList[43] = {
    id: 43,
    picture: "images/picBig.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 0,
    socials: "http://facebook.com"
    };

dataOrderList[44] = {
    id: 44,
    picture: "images/picMedium.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 10,
    socials: "http://facebook.com"
    };
dataOrderList[45] = {
    id: 45,
    picture: "images/picSmall.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 27,
    socials: "http://facebook.com"
    };

dataOrderList[46] = {
    id: 46,
    picture: "images/picBig.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 30,
    socials: "http://facebook.com"
    };

dataOrderList[47] = {
    id: 47,
    picture: "images/picMedium.png",
    pictureSize: 1,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 100,
    socials: "http://facebook.com"
    };

dataOrderList[48] = {
    id: 48,
    picture: "images/picSmall.png",
    pictureSize: 2,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 80,
    socials: "http://facebook.com"
    };

dataOrderList[49] = {
    id: 49,
    picture: "images/picBig.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 32,
    socials: "http://facebook.com"
    };

dataOrderList[50] = {
    id: 50,
    picture: "images/picMedium.png",
    pictureSize: 3,
    title: "Animation films",
    text: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
    rating: 10,
    socials: "http://facebook.com"
    };



$(document).ready(function() {
    
    $(".burger-menu").click(function(event) {
        $(".burger-menu__burger, .sub-menu").toggleClass("active");
        $("body").toggleClass("lock");    
    });   
    
//  Строка поиска
  
    $(".search__pseudo-btn").click(function(event) {
        $(".search__row, .search__btn, .search__pseudo-btn, .search-container").toggleClass("active");
    
    });
    
    
    $(".search__btn").click(function(event) {
        $(".search__row, .search__btn, .search__pseudo-btn").toggleClass("active");
    
    });
    
    
//  Отслеживание конца страницы 
  
    $(window).scroll(function() {
   if($(window).scrollTop() + $(window).height() >= $(document).height()-100) {
       loadNextPage(5);
   }
});
//    fillRaiting("card_0", 95);
    
    //    Масонри
    
    $('#masonry-grid').masonry({
        itemSelector: '.grid-item',
        columnWidth: '.persent-size',
        percentPosition: true           
    });
    
    loadNextPage(10);  
    
    
   
});

//Звездный рейтинг

function fillRaiting(cardId, ratingValue){
    let card = $("#" + cardId);
    let starsArray = $(".red-star", card);
    starsArray[0].setAttribute("width", 100*(ratingValue/25)+"%");
    starsArray[1].setAttribute("width", 100*((ratingValue-25)/25)+"%");
    starsArray[2].setAttribute("width", 100*((ratingValue-50)/25)+"%");
    starsArray[3].setAttribute("width", 100*((ratingValue-75)/25)+"%");
}

function getCardHtml(cardObject){
    let cardHtml="";
    cardHtml+="<div class='grid-item persent-size'>";
    cardHtml+="<article class='card' id='card_"+cardObject.id+"'>";
    cardHtml+=" <div class='card__header'>";
        if (cardObject.pictureSize == 1) {
            cardHtml+="<div class='card__picture card__picture_small'>";
        } else if (cardObject.pictureSize == 2) {
            cardHtml+="<div class='card__picture card__picture_medium'>";
        } else {
          cardHtml+="<div class='card__picture card__picture_big'>";
        }

    cardHtml+="<img class='card__picture-img' src='" + cardObject.picture + "'>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="<div class='card__body card__container'>";
    cardHtml+="<h2 class='card__title'>" + cardObject.title + "</h2>";
    cardHtml+="<p class='card__text'>" + cardObject.text +"</p>";
    cardHtml+="</div>";
    cardHtml+="<div class='card__footer card__container'>";
    cardHtml+="<div class='rating-container'>";
    cardHtml+="<div class='rating'>";

for (var i=0; i<4; i++) {
    cardHtml+="<div class='rating__star'>";
    cardHtml+="<svg class='rating__star-img rating__star-img_color' version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='306px' height='306px' viewBox='0 0 306 306' style='enable-background:new 0 0 306 306;' xml:space='preserve'>";
    cardHtml+=" <defs>";
    cardHtml+="<clipPath id='heart'>";
    cardHtml+="<polygon points='153,230.775 247.35,299.625 211.65,187.425 306,121.125 191.25,121.125 153,6.375 114.75,121.125 0,121.125 94.35,187.425 58.65,299.625'/>";
    cardHtml+="</clipPath>";
    cardHtml+="</defs>";
    cardHtml+="<rect x='0' y='0' fill='rgb(217,217,217)' width='100%' height='100%' clip-path='url(#heart)' />";
    cardHtml+="<rect class='red-star' x='0' y='0' fill='#b9cb41' width='0' height='100%' clip-path='url(#heart)' />";
    cardHtml+="</svg>";
    cardHtml+="</div>";
}  
    
   
    
    
    cardHtml+="</div> ";
    cardHtml+="</div>";
    cardHtml+="<div class='socials-container'>";
    cardHtml+="<div class='socials'>";
    cardHtml+="<div class='socials__icon'>";
    cardHtml+="<svg class='socials__icon-img' height='512pt' viewBox='0 0 512 512' width='512pt' xmlns='http://www.w3.org/2000/svg'>";
    cardHtml+="<path d='m297.277344 508.667969c-2.132813.347656-4.273438.667969-6.421875.960937 2.148437-.292968 4.289062-.613281 6.421875-.960937zm0 0'/>";
    cardHtml+="<path d='m302.398438 507.792969c-1.019532.1875-2.039063.359375-3.058594.535156 1.019531-.175781 2.039062-.347656 3.058594-.535156zm0 0'/>";
    cardHtml+="<path d='m285.136719 510.339844c-2.496094.28125-5.007813.53125-7.527344.742187 2.519531-.210937 5.03125-.460937 7.527344-.742187zm0 0'/>";
    cardHtml+="<path d='m290.054688 509.738281c-1.199219.160157-2.40625.308594-3.609376.449219 1.203126-.140625 2.410157-.289062 3.609376-.449219zm0 0'/>";
    cardHtml+="<path d='m309.367188 506.410156c-.898438.191406-1.800782.382813-2.703126.566406.902344-.183593 1.804688-.375 2.703126-.566406zm0 0'/>";
    cardHtml+="<path d='m326.664062 502.113281c-.726562.207031-1.453124.402344-2.179687.605469.726563-.203125 1.453125-.398438 2.179687-.605469zm0 0'/>";
    cardHtml+="<path d='m321.433594 503.542969c-.789063.207031-1.582032.417969-2.375.617187.792968-.199218 1.585937-.40625 2.375-.617187zm0 0'/>";
    cardHtml+="<path d='m314.589844 505.253906c-.835938.195313-1.679688.378906-2.523438.566406.84375-.1875 1.6875-.371093 2.523438-.566406zm0 0'/>";
    cardHtml+="<path d='m277.527344 511.089844c-1.347656.113281-2.695313.214844-4.046875.304687 1.351562-.089843 2.699219-.191406 4.046875-.304687zm0 0'/>";
    cardHtml+="<path d='m512 256c0-141.363281-114.636719-256-256-256s-256 114.636719-256 256 114.636719 256 256 256c1.503906 0 3-.03125 4.5-.058594v-199.285156h-55v-64.097656h55v-47.167969c0-54.703125 33.394531-84.476563 82.191406-84.476563 23.367188 0 43.453125 1.742188 49.308594 2.519532v57.171875h-33.648438c-26.546874 0-31.6875 12.617187-31.6875 31.128906v40.824219h63.476563l-8.273437 64.097656h-55.203126v189.453125c107.003907-30.675781 185.335938-129.257813 185.335938-246.109375zm0 0'/>";
    cardHtml+="<path d='m272.914062 511.429688c-2.664062.171874-5.339843.308593-8.023437.398437 2.683594-.089844 5.359375-.226563 8.023437-.398437zm0 0'/>";
    cardHtml+="<path d='m264.753906 511.835938c-1.414062.046874-2.832031.082031-4.25.105468 1.417969-.023437 2.835938-.058594 4.25-.105468zm0 0'/>";
    cardHtml+="</svg>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="</article>";
    cardHtml+="</div>";
    
    return cardHtml;
}


function loadNextPage(pageSize) {
    let pageContent = "";
    let limitCard = lastCardId + pageSize;
    if (limitCard >= dataOrderList.length) {
        limitCard = dataOrderList.length;
    }
    for (i=lastCardId; i<limitCard; i++) {
       pageContent+= getCardHtml(dataOrderList[i]);   
    }
    var content = $(pageContent);
    $('#masonry-grid').append(content).masonry('appended', content).masonry();
    
    for (i=lastCardId; i<limitCard; i++){
        fillRaiting("card_"+dataOrderList[i].id, dataOrderList[i].rating);
    }
    lastCardId+= pageSize;
}



























